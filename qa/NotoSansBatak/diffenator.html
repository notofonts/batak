<!DOCTYPE html>
<html lang="en" dir="auto">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Diffenator3</title>
	<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
		crossorigin="anonymous"></script>
	<style type="text/css">
		@font-face {
      font-family: "Font Before";
      src: url();
    }

    @font-face {
      font-family: "Font After";
      src: url();
    }

    .font-before, .font-after {
      font-variation-settings: "wght" 400, "wdth" 100;
    }

    .font-before {
      font-family: "Font Before", "Adobe Notdef";
    }

    .font-after {
      font-family: "Font After", "Adobe Notdef";
    }

	:root {
	--node-pt-size: 40px;
	}

	@import url('https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap');

body {
    background-color: #b3d4f5 !important;
    font-family: "Montserrat", sans-serif !important;
}

.nav-pills .nav-item.show .nav-link, .nav-pills .nav-link.active {
    background-color: #ced9e4 !important;
}
.nav-item {
    width: 100%;
    margin-bottom: 10px;
    padding: 2px;
}

.nav-pills .nav-link{
    background-color: #9fcaf5 !important;
}
h4 {
    color: #6f7882 !important;
}

@font-face {
    font-family: "Adobe NotDef";
    src: url(https://cdn.jsdelivr.net/gh/adobe-fonts/adobe-notdef/AND-Regular.ttf);
}

.box-title {
    width: 100%;
    font-size: 8pt;
    font-weight: 700;
    border-top: 1px solid black;
    padding-top: 5px;
    margin-bottom: 10pt;
    display: block;
}

.box {
    margin-bottom: 20pt;
    width: 100%;
    float: left;
}

.box-text {}

#ui-nav {
    position: fixed;
    right: 20px;
    z-index: 100;
}

#font-toggle {}

.ui-nav-item {
    display: block;
    cursor: pointer;
    -webkit-user-select: none;
    /* Safari */
    -moz-user-select: none;
    /* Firefox */
    -ms-user-select: none;
    /* IE10+/Edge */
    user-select: none;
    /* Standard */
    text-align: center;
    color: white;
    background-color: black;
    display: block;
    font-size: 14pt;
    padding: 5px;
    margin: 2px;
}

/* Stuff needed for the table differ */
body {
    font-family: Helvetica;
}

.node {
    font-family: courier;
    cursor: pointer;
    position: relative;
    left: 30px;
    padding: 5px;
    display: block;
    border: 1px dashed grey;
    background-color: #e9e9ee;
}

.header {
    font-weight: bold;
}

.attr-before {
    color: green;
    cursor: text;
}

.attr-after {
    color: red;
    cursor: text;
}

.leaf {
    font-weight: bold;
}

.old .cell .new {
    display: none;
}

.new .cell .old {
    display: none;
}

.both .cell .old {
    opacity: 0.75;
    color: red;
}

.both .cell .new {
    opacity: 0.75;
    position: absolute;
    top: 0;
    color: green;
}

.spacer {
    display: block;
    float: left;
    width: 100%;
}

#ot-panel {
    max-height: 400px;
    overflow-y: scroll;
    background: white;
    padding: 10px;
    display: none;
   }

   .cell{
    z-index: -100;
    float: left;
    display: block;
    text-align: center;
    padding: 5pt;
    margin: 5pt;
    width: 50pt;
    font-size: var(--node-pt-size);
    line-height: calc(var(--node-pt-size) * 1.5);
  }
  .cell-word{
    z-index: -100;
    float: left;
    display: block;
    text-align: center;
    padding: 5pt;
    margin: 5pt;
    font-size: var(--node-pt-size);
    line-height: calc(var(--node-pt-size) * 1.5);
    box-shadow: rgba(0, 0, 0, 0.15) 1.95px 1.95px 2.6px;
  }
  .cell-glyph{
    z-index: -100;
    float: left;
    display: block;
    text-align: center;
    border-radius: 5pt;
    box-shadow: rgba(0, 0, 0, 0.15) 1.95px 1.95px 2.6px;
    padding: 5pt;
    margin: 5pt;
    width: calc(var(--node-pt-size) * 2);
    min-height: calc(var(--node-pt-size) * 2);
    font-size: var(--node-pt-size);
  }
  .cell-glyph.font-before, .cell-word.font-before {
    background: #eff6f2;
  }
  .cell-glyph.font-after, .cell-word.font-after {
    background: #f7f4f4;
  }

  .cell-glyph:hover {
    box-shadow: none;
    background: #f0f0f5;
  }
  .cat-strings .cell {
    clear: both;
    position: static;
    float: none;
    text-align: left;
  }
  .codepoint {
    text-align: center;
    font-family: sans-serif;
    font-size: 10pt;
    line-height: 10pt;
  }
  .box-title {
    clear: both;
  }
  .node.closed::before {
    content: "+";
    margin-right: 5pt;
  }
  .node.open::before {
    content: "-";
    margin-right: 5pt;
  }

  .tooltip pre {
    background-color: #6f7882;
    padding: 5px;
    white-space: pre-wrap;
    word-break: break-all;
  }
  .tooltip {
    line-height: 1em;
  }
  .tooltip-inner {
    max-width: 300px;
  }

  h1,h2,h3,h4,h5 {
    clear: both;
  }

  #locationnav li {
    white-space: wrap;
  }

  #userdefined div { width: 100%; }
  
/* The following rules are used in the WASM version, not in the CLI version.
   But we keep them here so we can share them between the two versions. */

   .modal-dialog {
    max-width: 100% !important;
    margin: 0 !important;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    height: 100vh;
    display: flex;
  }

  .fontdrop {
    padding: 30px;
    border-radius: 20px;
    outline: 3px dashed #ffffffff;
    outline-offset: -20px;
  }

  #fontbefore {
    background-color: #ddffdddd;
  }

  #fontafter {
    background-color: #ffdddddd;
  }

  .dragging {
    background-image: linear-gradient(rgb(0 0 0/5%) 0 0);
    outline: 5px dashed #ffffffff;
  }

  #diffkerns {
    max-height: 500px;
    overflow-y: scroll;
  }
		</style>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
	integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">

</head>

<body>

		<div id="ui-nav">
		  <div class="ui-nav-item" id="fonttoggle">Old</div>
		  <div class="ui-nav-item" id="fontanimate">Animate</div>
		  <div id="axes">
		  </div>
		</div>
	
	<div class="row">
		<div class="col-2">
			<ul class="nav nav-pills" id="locationnav">
			</ul>
		</div>
		<div class="col-9 mt-3">
			<div id="title"></div>
			<div id="cmapdiff"> </div>
			<div id="main"></div>
			<div id="userdefined">
				<h4>User defined sample text</h4>
				<div contenteditable="true" class="font-before cell-word">
					You can type your own text here to see it previewed in the fonts.
				</div>
				<div style="clear: both"></div>
			</div>
			<div id="diffkerns"> </div>
			<div id="difftable"> </div>
		</div>
	</div>
	<script type="module">
		function renderTableDiff(node, toplevel) {
  var wrapper = $("<div> </div>");
  if (!node) {
    return wrapper;
  }
  if (Array.isArray(node) && node.length == 2) {
    var before = $("<span/>");
    before.addClass("attr-before");
    before.html(" " + node[0] + " ");
    var after = $("<span/>");
    after.addClass("attr-after");
    after.append(renderTableDiff(node[1], true).children());
    wrapper.append(before);
    wrapper.append(after);
    return wrapper;
  }
  if (node.constructor != Object) {
    var thing = $("<span/>");
    thing.html(node);
    wrapper.append(thing);
    return wrapper;
  }
  for (const [key, value] of Object.entries(node)) {
    var display = $("<div/>");
    display.addClass("node");
    if (!toplevel) {
      display.hide();
    }
    display.append(key);
    display.append(renderTableDiff(value, false).children());
    if (display.children(".node").length > 0) {
      display.addClass("closed");
    }
    wrapper.append(display);
  }
  return wrapper;
}

function addAGlyph(glyph, where) {
  let title = "";
  if (glyph.name) {
    title = "name: " + glyph.name;
  }
  let cp =
    "<br>U+" +
    glyph.string.codePointAt(0).toString(16).padStart(4, "0").toUpperCase();
  where.append(`
        <div class="cell-glyph font-before">
        <div data-toggle="tooltip" data-html="true" data-title="${glyph.differing_pixels} pixels"> ${glyph.string}
        <div class="codepoint" data-toggle="tooltip" data-html="true" data-title="${title}">
		${cp}
        </div>
        </div>
    `);
}

function addAWord(diff, where) {
  if (!diff.buffer_b) {
    diff.buffer_b = diff.buffer_a;
  }
  where.append(`
		<div class="cell-word font-before">
		<span data-toggle="tooltip" data-html="true" data-title="Before: <pre>${diff.buffer_a}</pre>After: <pre>${diff.buffer_b}</pre><br>difference: ${diff.differing_pixels} pixels">
		${diff.word}
		</span>
		</div>
	`);
}

function diffTables(report) {
  $("#difftable").empty();
  $("#difftable").append(`<h4 class="mt-2 box-title">Table-level details</h4>`);
  $("#difftable").append(
    renderTableDiff({ tables: report["tables"] }, true).children()
  );
  $("#difftable .node").on("click", function (e) {
    $(this).toggleClass("closed open");
    $(this).children(".node").toggle();
    e.stopPropagation();
  });
}
function diffKerns(report) {
  $("#diffkerns").empty();
  $("#diffkerns").append(`<h4 class="mt-2">Modified Kerns</h4>`);
  $("#diffkerns").append(
    `<table class="table table-striped" id="diffkerns"><tr><th>Pair</th><th>Old</old><th>New</th></table>`
  );
  for (let [pair, value] of Object.entries(report["kerns"])) {
    if (pair == "error") {
      $("#diffkerns").append(`<p class="text-danger">Error: ${value}</p>`);
      continue;
    } else {
      let row = $("<tr>");
      row.append(`<td>${pair}</td>`);
      row.append(`<td>${serializeKernBefore(value)}</td>`);
      row.append(`<td>${serializeKernAfter(value)}</td>`);
      $("#diffkerns table").append(row);
    }
  }
}

function serializeKernBefore(kern) {
  if (Array.isArray(kern)) {
    return serializeKern(kern[0], -1);
  }
  return serializeKern(kern, 0);
}

function serializeKernAfter(kern) {
  if (Array.isArray(kern)) {
    return serializeKern(kern[1], -1);
  }
  return serializeKern(kern, 1);
}

function serializeKern(kern, index) {
  let string = "";
  if (kern === null || kern === undefined) {
    return "(null)";
  }
  if (kern.x) {
    string += serializeKernValue(kern.x, index);
  } else if (kern.y) {
    string = "0";
  }

  if (kern.y) {
    string += "," + serializeKernValue(kern.y, index);
  }
  if (!kern.x_placement && !kern.y_placement) {
    return string;
  }
  string += "@";
  if (kern.x_placement) {
    string += serializeKernValue(kern.x_placement, index);
  } else if (kern.y_placement) {
    string += "0";
  }
  if (kern.y_placement) {
    string += "," + serializeKernValue(kern.y_placement, index);
  }
  return string;
}

function serializeKernValue(kern, index) {
  if (typeof kern == "number") {
    return kern;
  }
  let string = "(";
  let verybig = Object.entries(kern).length > 5;
  for (let [key, value] of Object.entries(kern)) {
    if (key == "default") {
      string += value[index] + " ";
    } else {
      string += value[index] + "@" + key + " ";
    }
    if (verybig) {
      string += "<br>";
    }
  }
  return string.trim() + ")";
}

function cmapDiff(report) {
  if (report.cmap_diff && (report.cmap_diff.new || report.cmap_diff.missing)) {
    $("#cmapdiff").append(
      `<h4 class="mt-2">Added and Removed Encoded Glyphs</h4>`
    );
    if (report["cmap_diff"]["new"]) {
      $("#cmapdiff").append(`<h4 class="box-title">Added Glyphs</h4>`);
      let added = $("<div>");
      for (let glyph of report["cmap_diff"]["new"]) {
        addAGlyph(glyph, added);
      }
      $("#cmapdiff").append(added);
    }

    if (report["cmap_diff"]["missing"]) {
      $("#cmapdiff").append(`<h4 class="box-title">Removed Glyphs</h4>`);
      let missing = $("<div>");
      for (let glyph of report["cmap_diff"]["missing"]) {
        addAGlyph(glyph, missing);
      }
      $("#cmapdiff").append(missing);
    }
  } else {
    $("#cmapdiff").append(`<p>No changes to encoded glyphs</p>`);
  }
}

function setupAnimation() {
  $("#fonttoggle").click(function () {
    if ($(this).text() == "Old") {
      $(this).text("New");
      $(".font-before").removeClass("font-before").addClass("font-after");
    } else {
      $(this).text("Old");
      $(".font-after").removeClass("font-after").addClass("font-before");
    }
  });

  let animationHandle;
  function animate() {
    $("#fonttoggle").click();
    animationHandle = setTimeout(animate, 1000);
  }
  $("#fontanimate").click(function () {
    if ($(this).text() == "Animate") {
      $(this).text("Stop");
      animate();
    } else {
      $(this).text("Animate");
      clearTimeout(animationHandle);
    }
  });
}

export {
  renderTableDiff,
  addAGlyph,
  addAWord,
  cmapDiff,
  diffTables,
  diffKerns,
  setupAnimation,
};

	var report = {"tables":{"GPOS":{"feature_list":{"abvm":{"4":[null,6],"5":[null,7]},"blwm":{"0":[6,8],"1":[7,9]},"mark":{"0":[8,10],"1":[null,11],"2":[null,12],"3":[null,13]}},"lookup_list":{"2":{"0":{"marks":{"anchor_1":[{"eSignPakbatak":{"x":-170,"y":536},"oSignKarobatak":{"x":-170,"y":536},"ngSignbatak":{"x":0,"y":488},"hSignbatak":{"x":0,"y":508}},null],"anchor_2":[{"eeSignbatak":{"x":-437,"y":488}},null]},"bases":{"aSimabatak":[{"anchor_1":{"x":837,"y":536},"anchor_2":{"x":227,"y":536}},null],"habatak":{"anchor_1":[{"x":915,"y":536},null],"anchor_2":[{"x":305,"y":536},null]},"haSimabatak":{"anchor_1":[{"x":837,"y":536},null],"anchor_2":[{"x":227,"y":536},null]},"haMandaibatak":{"anchor_1":[{"x":827,"y":536},null],"anchor_2":[{"x":217,"y":536},null]},"babatak":[{"anchor_1":{"x":842,"y":536},"anchor_2":{"x":232,"y":536}},null],"karoBabatak":[{"anchor_1":{"x":807,"y":536},"anchor_2":{"x":197,"y":536}},null],"pabatak":[{"anchor_1":{"x":689,"y":536},"anchor_2":{"x":129,"y":536}},null],"paSimabatak":[{"anchor_1":{"x":738,"y":536},"anchor_2":{"x":168,"y":536}},null],"nabatak":[{"anchor_1":{"x":845,"y":585},"anchor_2":{"x":275,"y":585}},null],"naMandaibatak":[{"anchor_1":{"x":778,"y":659},"anchor_2":{"x":158,"y":659}},null],"wabatak":[{"anchor_1":{"x":788,"y":536},"anchor_2":{"x":178,"y":536}},null],"waSimabatak":[{"anchor_1":{"x":817,"y":536},"anchor_2":{"x":207,"y":536}},null],"pakpakWabatak":[{"anchor_1":{"x":631,"y":536},"anchor_2":{"x":51,"y":536}},null],"gabatak":[{"anchor_1":{"x":758,"y":536},"anchor_2":{"x":148,"y":536}},null],"gaSimabatak":[{"anchor_1":{"x":817,"y":536},"anchor_2":{"x":207,"y":536}},null],"jabatak":[{"anchor_1":{"x":778,"y":536},"anchor_2":{"x":168,"y":536}},null],"dabatak":[{"anchor_1":{"x":678,"y":536},"anchor_2":{"x":168,"y":536}},null],"rabatak":[{"anchor_1":{"x":778,"y":536},"anchor_2":{"x":168,"y":536}},null],"raSimabatak":[{"anchor_1":{"x":827,"y":536},"anchor_2":{"x":227,"y":536}},null],"mabatak":[{"anchor_1":{"x":837,"y":536},"anchor_2":{"x":227,"y":536}},null],"maSimabatak":[{"anchor_1":{"x":866,"y":536},"anchor_2":{"x":256,"y":536}},null],"taSouthbatak":[{"anchor_1":{"x":610,"y":536},"anchor_2":{"x":140,"y":536}},null],"taNorthbatak":[{"anchor_1":{"x":856,"y":536},"anchor_2":{"x":246,"y":536}},null],"sabatak":{"anchor_1":[{"x":788,"y":536},null],"anchor_2":[{"x":178,"y":536},null]},"saSimabatak":{"anchor_1":[{"x":837,"y":536},null],"anchor_2":[{"x":227,"y":536},null]},"saMandaibatak":{"anchor_1":[{"x":837,"y":536},null],"anchor_2":[{"x":226,"y":536},null]},"yabatak":[{"anchor_1":{"x":837,"y":536},"anchor_2":{"x":227,"y":536}},null],"yaSimabatak":[{"anchor_1":{"x":837,"y":536},"anchor_2":{"x":227,"y":536}},null],"ngabatak":[{"anchor_1":{"x":610,"y":536},"anchor_2":{"x":90,"y":536}},null],"labatak":[{"anchor_1":{"x":758,"y":536},"anchor_2":{"x":178,"y":536}},null],"laSimabatak":[{"anchor_1":{"x":837,"y":536},"anchor_2":{"x":227,"y":536}},null],"nyabatak":[{"anchor_1":{"x":748,"y":536},"anchor_2":{"x":168,"y":536}},null],"cabatak":[{"anchor_1":{"x":817,"y":536},"anchor_2":{"x":207,"y":536}},null],"ndabatak":[{"anchor_1":{"x":718,"y":536},"anchor_2":{"x":168,"y":536}},null],"mbabatak":[{"anchor_1":{"x":768,"y":536},"anchor_2":{"x":188,"y":536}},null]}}},"3":{"0":{"type":["mark_to_mark","mark_to_base"],"marks":{"anchor_0":{"tompibatak":[{"x":-479,"y":488},null],"uSignSimabatak":[{"x":-535,"y":488},null],"eeSignbatak":[null,{"x":-437,"y":488}]}},"basemarks":[{"tompibatak":{"anchor_0":{"x":-479,"y":791}},"uSignSimabatak":{"anchor_0":{"x":-554,"y":830}}},null],"bases":[null,{"aSimabatak":{"anchor_0":{"x":227,"y":536}},"habatak":{"anchor_0":{"x":305,"y":536}},"haSimabatak":{"anchor_0":{"x":227,"y":536}},"haMandaibatak":{"anchor_0":{"x":217,"y":536}},"babatak":{"anchor_0":{"x":232,"y":536}},"karoBabatak":{"anchor_0":{"x":197,"y":536}},"pabatak":{"anchor_0":{"x":129,"y":536}},"paSimabatak":{"anchor_0":{"x":168,"y":536}},"nabatak":{"anchor_0":{"x":275,"y":585}},"naMandaibatak":{"anchor_0":{"x":158,"y":659}},"wabatak":{"anchor_0":{"x":178,"y":536}},"waSimabatak":{"anchor_0":{"x":207,"y":536}},"pakpakWabatak":{"anchor_0":{"x":51,"y":536}},"gabatak":{"anchor_0":{"x":148,"y":536}},"gaSimabatak":{"anchor_0":{"x":207,"y":536}},"jabatak":{"anchor_0":{"x":168,"y":536}},"dabatak":{"anchor_0":{"x":168,"y":536}},"rabatak":{"anchor_0":{"x":168,"y":536}},"raSimabatak":{"anchor_0":{"x":227,"y":536}},"mabatak":{"anchor_0":{"x":227,"y":536}},"maSimabatak":{"anchor_0":{"x":256,"y":536}},"taSouthbatak":{"anchor_0":{"x":140,"y":536}},"taNorthbatak":{"anchor_0":{"x":246,"y":536}},"sabatak":{"anchor_0":{"x":178,"y":536}},"saSimabatak":{"anchor_0":{"x":227,"y":536}},"saMandaibatak":{"anchor_0":{"x":226,"y":536}},"yabatak":{"anchor_0":{"x":227,"y":536}},"yaSimabatak":{"anchor_0":{"x":227,"y":536}},"ngabatak":{"anchor_0":{"x":90,"y":536}},"labatak":{"anchor_0":{"x":178,"y":536}},"laSimabatak":{"anchor_0":{"x":227,"y":536}},"nyabatak":{"anchor_0":{"x":168,"y":536}},"cabatak":{"anchor_0":{"x":207,"y":536}},"ndabatak":{"anchor_0":{"x":168,"y":536}},"mbabatak":{"anchor_0":{"x":188,"y":536}}}]}},"4":{"0":{"type":["mark_to_mark","mark_to_base"],"marks":{"anchor_0":{"eeSignbatak":[{"x":-437,"y":488},null],"eSignPakbatak":[null,{"x":-170,"y":536}],"oSignKarobatak":[null,{"x":-170,"y":536}],"ngSignbatak":[null,{"x":0,"y":488}],"hSignbatak":[null,{"x":0,"y":508}]}},"basemarks":[{"eeSignbatak":{"anchor_0":{"x":-430,"y":723}}},null],"bases":[null,{"aSimabatak":{"anchor_0":{"x":837,"y":536}},"habatak":{"anchor_0":{"x":915,"y":536}},"haSimabatak":{"anchor_0":{"x":837,"y":536}},"haMandaibatak":{"anchor_0":{"x":827,"y":536}},"babatak":{"anchor_0":{"x":842,"y":536}},"karoBabatak":{"anchor_0":{"x":807,"y":536}},"pabatak":{"anchor_0":{"x":689,"y":536}},"paSimabatak":{"anchor_0":{"x":738,"y":536}},"nabatak":{"anchor_0":{"x":845,"y":585}},"naMandaibatak":{"anchor_0":{"x":778,"y":659}},"wabatak":{"anchor_0":{"x":788,"y":536}},"waSimabatak":{"anchor_0":{"x":817,"y":536}},"pakpakWabatak":{"anchor_0":{"x":631,"y":536}},"gabatak":{"anchor_0":{"x":758,"y":536}},"gaSimabatak":{"anchor_0":{"x":817,"y":536}},"jabatak":{"anchor_0":{"x":778,"y":536}},"dabatak":{"anchor_0":{"x":678,"y":536}},"rabatak":{"anchor_0":{"x":778,"y":536}},"raSimabatak":{"anchor_0":{"x":827,"y":536}},"mabatak":{"anchor_0":{"x":837,"y":536}},"maSimabatak":{"anchor_0":{"x":866,"y":536}},"taSouthbatak":{"anchor_0":{"x":610,"y":536}},"taNorthbatak":{"anchor_0":{"x":856,"y":536}},"sabatak":{"anchor_0":{"x":788,"y":536}},"saSimabatak":{"anchor_0":{"x":837,"y":536}},"saMandaibatak":{"anchor_0":{"x":837,"y":536}},"yabatak":{"anchor_0":{"x":837,"y":536}},"yaSimabatak":{"anchor_0":{"x":837,"y":536}},"ngabatak":{"anchor_0":{"x":610,"y":536}},"labatak":{"anchor_0":{"x":758,"y":536}},"laSimabatak":{"anchor_0":{"x":837,"y":536}},"nyabatak":{"anchor_0":{"x":748,"y":536}},"cabatak":{"anchor_0":{"x":817,"y":536}},"ndabatak":{"anchor_0":{"x":718,"y":536}},"mbabatak":{"anchor_0":{"x":768,"y":536}}}]}},"5":{"0":{"marks":{"anchor_0":{"eSignPakbatak":[{"x":-170,"y":536},null],"oSignKarobatak":[{"x":-170,"y":536},null],"ngSignbatak":[{"x":0,"y":488},null],"hSignbatak":[{"x":0,"y":508},null],"tompibatak":[null,{"x":-479,"y":488}],"uSignSimabatak":[null,{"x":-535,"y":488}]}},"basemarks":{"eSignPakbatak":[{"anchor_0":{"x":-170,"y":908}},null],"oSignKarobatak":[{"anchor_0":{"x":-170,"y":908}},null],"ngSignbatak":[{"anchor_0":{"x":0,"y":729}},null],"hSignbatak":[{"anchor_0":{"x":0,"y":868}},null],"tompibatak":[null,{"anchor_0":{"x":-479,"y":791}}],"uSignSimabatak":[null,{"anchor_0":{"x":-554,"y":830}}]}}},"6":{"0":{"type":["mark_to_base","mark_to_mark"],"marks":{"anchor_0":{"uSignbatak":[{"x":141,"y":58},null],"uSignbatak.paMandai":[{"x":141,"y":58},null],"uSignbatak.simple":[{"x":173,"y":-22},null],"eeSignbatak":[null,{"x":-437,"y":488}]}},"bases":[{"aSimabatak":{"anchor_0":{"x":974,"y":-59}},"habatak":{"anchor_0":{"x":787,"y":-70}},"haSimabatak":{"anchor_0":{"x":915,"y":-59}},"haMandaibatak":{"anchor_0":{"x":761,"y":-60}},"babatak":{"anchor_0":{"x":918,"y":-80}},"karoBabatak":{"anchor_0":{"x":791,"y":-30}},"pabatak":{"anchor_0":{"x":422,"y":248}},"paSimabatak":{"anchor_0":{"x":499,"y":53}},"nabatak":{"anchor_0":{"x":798,"y":-70}},"naMandaibatak":{"anchor_0":{"x":783,"y":-20}},"wabatak":{"anchor_0":{"x":831,"y":-59}},"waSimabatak":{"anchor_0":{"x":887,"y":-66}},"pakpakWabatak":{"anchor_0":{"x":446,"y":30}},"gabatak":{"anchor_0":{"x":803,"y":61}},"gaSimabatak":{"anchor_0":{"x":895,"y":-66}},"jabatak":{"anchor_0":{"x":899,"y":-18}},"dabatak":{"anchor_0":{"x":656,"y":-66}},"rabatak":{"anchor_0":{"x":703,"y":-58}},"raSimabatak":{"anchor_0":{"x":851,"y":-59}},"mabatak":{"anchor_0":{"x":886,"y":-74}},"maSimabatak":{"anchor_0":{"x":917,"y":-59}},"taSouthbatak":{"anchor_0":{"x":576,"y":-52}},"taNorthbatak":{"anchor_0":{"x":892,"y":-60}},"sabatak":{"anchor_0":{"x":770,"y":276}},"saSimabatak":{"anchor_0":{"x":853,"y":180}},"saMandaibatak":{"anchor_0":{"x":845,"y":51}},"yabatak":{"anchor_0":{"x":803,"y":66}},"yaSimabatak":{"anchor_0":{"x":803,"y":66}},"ngabatak":{"anchor_0":{"x":597,"y":-66}},"labatak":{"anchor_0":{"x":737,"y":188}},"laSimabatak":{"anchor_0":{"x":762,"y":188}},"nyabatak":{"anchor_0":{"x":729,"y":2}},"cabatak":{"anchor_0":{"x":798,"y":0}},"ndabatak":{"anchor_0":{"x":689,"y":37}},"mbabatak":{"anchor_0":{"x":790,"y":-70}}},null],"basemarks":[null,{"eeSignbatak":{"anchor_0":{"x":-430,"y":723}}}]}},"7":{"0":{"marks":{"anchor_0":{"uSignbatak":[{"x":141,"y":58},null],"uSignbatak.paMandai":[{"x":141,"y":58},null],"uSignbatak.simple":[{"x":173,"y":-22},null],"eSignPakbatak":[null,{"x":-170,"y":536}],"oSignKarobatak":[null,{"x":-170,"y":536}],"ngSignbatak":[null,{"x":0,"y":488}],"hSignbatak":[null,{"x":0,"y":508}]}},"basemarks":{"uSignbatak":[{"anchor_0":{"x":141,"y":-319}},null],"uSignbatak.paMandai":[{"anchor_0":{"x":141,"y":-319}},null],"uSignbatak.simple":[{"anchor_0":{"x":163,"y":-269}},null],"eSignPakbatak":[null,{"anchor_0":{"x":-170,"y":908}}],"oSignKarobatak":[null,{"anchor_0":{"x":-170,"y":908}}],"ngSignbatak":[null,{"anchor_0":{"x":0,"y":729}}],"hSignbatak":[null,{"anchor_0":{"x":0,"y":868}}]}}},"8":{"0":{"marks":{"anchor_0":{"tompibatak":[{"x":-479,"y":488},null],"uSignSimabatak":[{"x":-535,"y":488},null],"uSignbatak":[null,{"x":141,"y":58}],"uSignbatak.paMandai":[null,{"x":141,"y":58}],"uSignbatak.simple":[null,{"x":173,"y":-22}]},"anchor_1":[{"eSignPakbatak":{"x":-170,"y":536},"oSignKarobatak":{"x":-170,"y":536},"ngSignbatak":{"x":0,"y":488},"hSignbatak":{"x":0,"y":508}},null],"anchor_2":[{"eeSignbatak":{"x":-437,"y":488}},null],"anchor_3":[{"uSignbatak":{"x":141,"y":58},"uSignbatak.paMandai":{"x":141,"y":58},"uSignbatak.simple":{"x":173,"y":-22}},null]},"bases":{"uni25CC":[{"anchor_0":{"x":300,"y":580},"anchor_1":{"x":590,"y":585},"anchor_2":{"x":-10,"y":585},"anchor_3":{"x":491,"y":0}},null],"aSimabatak":[null,{"anchor_0":{"x":974,"y":-59}}],"habatak":[null,{"anchor_0":{"x":787,"y":-70}}],"haSimabatak":[null,{"anchor_0":{"x":915,"y":-59}}],"haMandaibatak":[null,{"anchor_0":{"x":761,"y":-60}}],"babatak":[null,{"anchor_0":{"x":918,"y":-80}}],"karoBabatak":[null,{"anchor_0":{"x":791,"y":-30}}],"pabatak":[null,{"anchor_0":{"x":422,"y":248}}],"paSimabatak":[null,{"anchor_0":{"x":499,"y":53}}],"nabatak":[null,{"anchor_0":{"x":798,"y":-70}}],"naMandaibatak":[null,{"anchor_0":{"x":783,"y":-20}}],"wabatak":[null,{"anchor_0":{"x":831,"y":-59}}],"waSimabatak":[null,{"anchor_0":{"x":887,"y":-66}}],"pakpakWabatak":[null,{"anchor_0":{"x":446,"y":30}}],"gabatak":[null,{"anchor_0":{"x":803,"y":61}}],"gaSimabatak":[null,{"anchor_0":{"x":895,"y":-66}}],"jabatak":[null,{"anchor_0":{"x":899,"y":-18}}],"dabatak":[null,{"anchor_0":{"x":656,"y":-66}}],"rabatak":[null,{"anchor_0":{"x":703,"y":-58}}],"raSimabatak":[null,{"anchor_0":{"x":851,"y":-59}}],"mabatak":[null,{"anchor_0":{"x":886,"y":-74}}],"maSimabatak":[null,{"anchor_0":{"x":917,"y":-59}}],"taSouthbatak":[null,{"anchor_0":{"x":576,"y":-52}}],"taNorthbatak":[null,{"anchor_0":{"x":892,"y":-60}}],"sabatak":[null,{"anchor_0":{"x":770,"y":276}}],"saSimabatak":[null,{"anchor_0":{"x":853,"y":180}}],"saMandaibatak":[null,{"anchor_0":{"x":845,"y":51}}],"yabatak":[null,{"anchor_0":{"x":803,"y":66}}],"yaSimabatak":[null,{"anchor_0":{"x":803,"y":66}}],"ngabatak":[null,{"anchor_0":{"x":597,"y":-66}}],"labatak":[null,{"anchor_0":{"x":737,"y":188}}],"laSimabatak":[null,{"anchor_0":{"x":762,"y":188}}],"nyabatak":[null,{"anchor_0":{"x":729,"y":2}}],"cabatak":[null,{"anchor_0":{"x":798,"y":0}}],"ndabatak":[null,{"anchor_0":{"x":689,"y":37}}],"mbabatak":[null,{"anchor_0":{"x":790,"y":-70}}]}}},"9":[null,[{"type":"mark_to_mark","marks":{"anchor_0":{"uSignbatak":{"x":141,"y":58},"uSignbatak.paMandai":{"x":141,"y":58},"uSignbatak.simple":{"x":173,"y":-22}}},"basemarks":{"uSignbatak":{"anchor_0":{"x":141,"y":-319}},"uSignbatak.paMandai":{"anchor_0":{"x":141,"y":-319}},"uSignbatak.simple":{"anchor_0":{"x":163,"y":-269}}}}]],"10":[null,[{"type":"mark_to_base","marks":{"anchor_0":{"uSignbatak":{"x":141,"y":58},"uSignbatak.paMandai":{"x":141,"y":58},"uSignbatak.simple":{"x":173,"y":-22}}},"bases":{"uni25CC":{"anchor_0":{"x":491,"y":0}}}}]],"11":[null,[{"type":"mark_to_base","marks":{"anchor_0":{"tompibatak":{"x":-479,"y":488},"uSignSimabatak":{"x":-535,"y":488}}},"bases":{"uni25CC":{"anchor_0":{"x":300,"y":580}}}}]],"12":[null,[{"type":"mark_to_base","marks":{"anchor_0":{"eeSignbatak":{"x":-437,"y":488}}},"bases":{"uni25CC":{"anchor_0":{"x":-10,"y":585}}}}]],"13":[null,[{"type":"mark_to_base","marks":{"anchor_0":{"eSignPakbatak":{"x":-170,"y":536},"oSignKarobatak":{"x":-170,"y":536},"ngSignbatak":{"x":0,"y":488},"hSignbatak":{"x":0,"y":508}}},"bases":{"uni25CC":{"anchor_0":{"x":590,"y":585}}}}]]}},"GSUB":{"lookup_list":{"15":{"0":{"rules":{"0":["uSignSimabatak' lookup lookup_0 [abatak aSimabatak habatak haSimabatak haMandaibatak babatak karoBabatak pabatak paSimabatak nabatak naMandaibatak wabatak waSimabatak pakpakWabatak gabatak gaSimabatak jabatak dabatak rabatak raSimabatak mabatak maSimabatak taSouthbatak taNorthbatak sabatak saSimabatak saMandaibatak yabatak yaSimabatak ngabatak labatak laSimabatak nyabatak cabatak ndabatak mbabatak]'  [pangolatbatak panongonanbatak]' lookup lookup_9","eSignbatak' lookup lookup_0 [abatak aSimabatak habatak haSimabatak haMandaibatak babatak karoBabatak pabatak paSimabatak nabatak naMandaibatak wabatak waSimabatak pakpakWabatak gabatak gaSimabatak jabatak dabatak rabatak raSimabatak mabatak maSimabatak taSouthbatak taNorthbatak sabatak saSimabatak saMandaibatak yabatak yaSimabatak ngabatak labatak laSimabatak nyabatak cabatak ndabatak mbabatak]'  [pangolatbatak panongonanbatak]' lookup lookup_1"],"1":["uSignbatak' lookup lookup_0 [abatak aSimabatak habatak haSimabatak haMandaibatak babatak karoBabatak pabatak paSimabatak nabatak naMandaibatak wabatak waSimabatak pakpakWabatak gabatak gaSimabatak jabatak dabatak rabatak raSimabatak mabatak maSimabatak taSouthbatak taNorthbatak sabatak saSimabatak saMandaibatak yabatak yaSimabatak ngabatak labatak laSimabatak nyabatak cabatak ndabatak mbabatak]'  [pangolatbatak panongonanbatak]' lookup lookup_8",null],"2":["oSignKarobatak' lookup lookup_0 [abatak aSimabatak habatak haSimabatak haMandaibatak babatak karoBabatak pabatak paSimabatak nabatak naMandaibatak wabatak waSimabatak pakpakWabatak gabatak gaSimabatak jabatak dabatak rabatak raSimabatak mabatak maSimabatak taSouthbatak taNorthbatak sabatak saSimabatak saMandaibatak yabatak yaSimabatak ngabatak labatak laSimabatak nyabatak cabatak ndabatak mbabatak]'  [pangolatbatak panongonanbatak]' lookup lookup_7",null],"3":["oSignbatak' lookup lookup_0 [abatak aSimabatak habatak haSimabatak haMandaibatak babatak karoBabatak pabatak paSimabatak nabatak naMandaibatak wabatak waSimabatak pakpakWabatak gabatak gaSimabatak jabatak dabatak rabatak raSimabatak mabatak maSimabatak taSouthbatak taNorthbatak sabatak saSimabatak saMandaibatak yabatak yaSimabatak ngabatak labatak laSimabatak nyabatak cabatak ndabatak mbabatak]'  [pangolatbatak panongonanbatak]' lookup lookup_6",null],"4":["iSignKarobatak' lookup lookup_0 [abatak aSimabatak habatak haSimabatak haMandaibatak babatak karoBabatak pabatak paSimabatak nabatak naMandaibatak wabatak waSimabatak pakpakWabatak gabatak gaSimabatak jabatak dabatak rabatak raSimabatak mabatak maSimabatak taSouthbatak taNorthbatak sabatak saSimabatak saMandaibatak yabatak yaSimabatak ngabatak labatak laSimabatak nyabatak cabatak ndabatak mbabatak]'  [pangolatbatak panongonanbatak]' lookup lookup_5",null],"5":["iSignbatak' lookup lookup_0 [abatak aSimabatak habatak haSimabatak haMandaibatak babatak karoBabatak pabatak paSimabatak nabatak naMandaibatak wabatak waSimabatak pakpakWabatak gabatak gaSimabatak jabatak dabatak rabatak raSimabatak mabatak maSimabatak taSouthbatak taNorthbatak sabatak saSimabatak saMandaibatak yabatak yaSimabatak ngabatak labatak laSimabatak nyabatak cabatak ndabatak mbabatak]'  [pangolatbatak panongonanbatak]' lookup lookup_4",null],"6":["eeSignbatak' lookup lookup_0 [abatak aSimabatak habatak haSimabatak haMandaibatak babatak karoBabatak pabatak paSimabatak nabatak naMandaibatak wabatak waSimabatak pakpakWabatak gabatak gaSimabatak jabatak dabatak rabatak raSimabatak mabatak maSimabatak taSouthbatak taNorthbatak sabatak saSimabatak saMandaibatak yabatak yaSimabatak ngabatak labatak laSimabatak nyabatak cabatak ndabatak mbabatak]'  [pangolatbatak panongonanbatak]' lookup lookup_3",null],"7":["eSignPakbatak' lookup lookup_0 [abatak aSimabatak habatak haSimabatak haMandaibatak babatak karoBabatak pabatak paSimabatak nabatak naMandaibatak wabatak waSimabatak pakpakWabatak gabatak gaSimabatak jabatak dabatak rabatak raSimabatak mabatak maSimabatak taSouthbatak taNorthbatak sabatak saSimabatak saMandaibatak yabatak yaSimabatak ngabatak labatak laSimabatak nyabatak cabatak ndabatak mbabatak]'  [pangolatbatak panongonanbatak]' lookup lookup_2",null],"8":["eSignbatak' lookup lookup_0 [abatak aSimabatak habatak haSimabatak haMandaibatak babatak karoBabatak pabatak paSimabatak nabatak naMandaibatak wabatak waSimabatak pakpakWabatak gabatak gaSimabatak jabatak dabatak rabatak raSimabatak mabatak maSimabatak taSouthbatak taNorthbatak sabatak saSimabatak saMandaibatak yabatak yaSimabatak ngabatak labatak laSimabatak nyabatak cabatak ndabatak mbabatak]'  [pangolatbatak panongonanbatak]' lookup lookup_1",null]}},"1":[null,{"type":"sequence_context","rules":["eSignPakbatak' lookup lookup_0 [abatak aSimabatak habatak haSimabatak haMandaibatak babatak karoBabatak pabatak paSimabatak nabatak naMandaibatak wabatak waSimabatak pakpakWabatak gabatak gaSimabatak jabatak dabatak rabatak raSimabatak mabatak maSimabatak taSouthbatak taNorthbatak sabatak saSimabatak saMandaibatak yabatak yaSimabatak ngabatak labatak laSimabatak nyabatak cabatak ndabatak mbabatak]'  [pangolatbatak panongonanbatak]' lookup lookup_2"]}],"2":[null,{"type":"sequence_context","rules":["eeSignbatak' lookup lookup_0 [abatak aSimabatak habatak haSimabatak haMandaibatak babatak karoBabatak pabatak paSimabatak nabatak naMandaibatak wabatak waSimabatak pakpakWabatak gabatak gaSimabatak jabatak dabatak rabatak raSimabatak mabatak maSimabatak taSouthbatak taNorthbatak sabatak saSimabatak saMandaibatak yabatak yaSimabatak ngabatak labatak laSimabatak nyabatak cabatak ndabatak mbabatak]'  [pangolatbatak panongonanbatak]' lookup lookup_3"]}],"3":[null,{"type":"sequence_context","rules":["iSignbatak' lookup lookup_0 [abatak aSimabatak habatak haSimabatak haMandaibatak babatak karoBabatak pabatak paSimabatak nabatak naMandaibatak wabatak waSimabatak pakpakWabatak gabatak gaSimabatak jabatak dabatak rabatak raSimabatak mabatak maSimabatak taSouthbatak taNorthbatak sabatak saSimabatak saMandaibatak yabatak yaSimabatak ngabatak labatak laSimabatak nyabatak cabatak ndabatak mbabatak]'  [pangolatbatak panongonanbatak]' lookup lookup_4"]}],"4":[null,{"type":"sequence_context","rules":["iSignKarobatak' lookup lookup_0 [abatak aSimabatak habatak haSimabatak haMandaibatak babatak karoBabatak pabatak paSimabatak nabatak naMandaibatak wabatak waSimabatak pakpakWabatak gabatak gaSimabatak jabatak dabatak rabatak raSimabatak mabatak maSimabatak taSouthbatak taNorthbatak sabatak saSimabatak saMandaibatak yabatak yaSimabatak ngabatak labatak laSimabatak nyabatak cabatak ndabatak mbabatak]'  [pangolatbatak panongonanbatak]' lookup lookup_5"]}],"5":[null,{"type":"sequence_context","rules":["oSignbatak' lookup lookup_0 [abatak aSimabatak habatak haSimabatak haMandaibatak babatak karoBabatak pabatak paSimabatak nabatak naMandaibatak wabatak waSimabatak pakpakWabatak gabatak gaSimabatak jabatak dabatak rabatak raSimabatak mabatak maSimabatak taSouthbatak taNorthbatak sabatak saSimabatak saMandaibatak yabatak yaSimabatak ngabatak labatak laSimabatak nyabatak cabatak ndabatak mbabatak]'  [pangolatbatak panongonanbatak]' lookup lookup_6"]}],"6":[null,{"type":"sequence_context","rules":["oSignKarobatak' lookup lookup_0 [abatak aSimabatak habatak haSimabatak haMandaibatak babatak karoBabatak pabatak paSimabatak nabatak naMandaibatak wabatak waSimabatak pakpakWabatak gabatak gaSimabatak jabatak dabatak rabatak raSimabatak mabatak maSimabatak taSouthbatak taNorthbatak sabatak saSimabatak saMandaibatak yabatak yaSimabatak ngabatak labatak laSimabatak nyabatak cabatak ndabatak mbabatak]'  [pangolatbatak panongonanbatak]' lookup lookup_7"]}],"7":[null,{"type":"sequence_context","rules":["uSignbatak' lookup lookup_0 [abatak aSimabatak habatak haSimabatak haMandaibatak babatak karoBabatak pabatak paSimabatak nabatak naMandaibatak wabatak waSimabatak pakpakWabatak gabatak gaSimabatak jabatak dabatak rabatak raSimabatak mabatak maSimabatak taSouthbatak taNorthbatak sabatak saSimabatak saMandaibatak yabatak yaSimabatak ngabatak labatak laSimabatak nyabatak cabatak ndabatak mbabatak]'  [pangolatbatak panongonanbatak]' lookup lookup_8"]}],"8":[null,{"type":"sequence_context","rules":["uSignSimabatak' lookup lookup_0 [abatak aSimabatak habatak haSimabatak haMandaibatak babatak karoBabatak pabatak paSimabatak nabatak naMandaibatak wabatak waSimabatak pakpakWabatak gabatak gaSimabatak jabatak dabatak rabatak raSimabatak mabatak maSimabatak taSouthbatak taNorthbatak sabatak saSimabatak saMandaibatak yabatak yaSimabatak ngabatak labatak laSimabatak nyabatak cabatak ndabatak mbabatak]'  [pangolatbatak panongonanbatak]' lookup lookup_9"]}]}}},"head":{"checksum_adjustment":[3464887006,1634287068],"modified":[3778478715,3813907617]},"hhea":{"caret_slope_rise":[1,1000]}},"cmap_diff":{},"locations":[{"location":"Default","words":{}}]};
		function buildLocation_statichtml(loc) {
  // Set font styles to appropriate axis locations
  let rule = document.styleSheets[0].cssRules[2].style;
  let cssSetting = "";
  let textLocation = "Default";
  if (loc.coords) {
    cssSetting = Object.entries(loc.coords)
      .map(function ([axis, value]) {
        return `"${axis}" ${value}`;
      })
      .join(", ");
    textLocation = Object.entries(loc.coords)
      .map(function ([axis, value]) {
        return `${axis}=${value}`;
      })
      .join(" ");
    rule.setProperty("font-variation-settings", cssSetting);
  }

  $("#main").empty();

  $("#title").html(`<h4 class="mt-2">${textLocation}</h2>`);

  if (loc.glyphs) {
    $("#main").append("<h4>Modified Glyphs</h4>");
    let glyphs = $("<div>");
    for (let glyph of loc.glyphs) {
      addAGlyph(glyph, glyphs);
    }
    $("#main").append(glyphs);
  }

  if (loc.words) {
    $("#main").append("<h4>Modified Words</h4>");
    for (let [script, words] of Object.entries(loc.words)) {
      let scriptTitle = $(`<h6>${script}</h6>`);
      $("#main").append(scriptTitle);
      let worddiv = $("<div>");
      for (let word of words) {
        addAWord(word, worddiv);
      }
      $("#main").append(worddiv);
    }
  }
  $('[data-toggle="tooltip"]').tooltip();
}

$(function () {
  if (report["tables"]) {
    diffTables(report);
  }
  if (report["kerns"]) {
    diffKerns(report);
  }
  cmapDiff(report);
  $('[data-toggle="tooltip"]').tooltip();
  if (!report["locations"]) {
    $("#title").html("<h4 class='mt-2'>No differences found</h4>");
    $("#ui-nav").hide();
    return;
  }

  for (var [index, loc] of report["locations"].entries()) {
    var loc_nav = $(`<li class="nav-item">
		<a class="nav-link text-secondary" href="#" data-index="${index}">${loc.location.replaceAll(
      ",",
      ",\u200b"
    )}</a>
	</li>`);
    $("#locationnav").append(loc_nav);
  }
  $("#locationnav li a").on("click", function (e) {
    $("#locationnav li a").removeClass("active");
    $(this).addClass("active");
    buildLocation_statichtml(report.locations[$(this).data("index")]);
  });
  $("#locationnav li a").eq(0).click();

  document.styleSheets[0].cssRules[0].style.setProperty(
    "src",
    "url(old-NotoSansBatak-Regular.ttf)"
  );
  document.styleSheets[0].cssRules[1].style.setProperty(
    "src",
    "url(new-NotoSansBatak-Regular.ttf)"
  );
  setupAnimation();
});

	</script>
</body>

</html>